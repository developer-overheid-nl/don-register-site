---
import Base from './Base.astro';
import { Container } from '@developer-overheid-nl/don-register-components';

const { appConfig, titlePage } = Astro.props;
---

<Base titlePage={titlePage} appConfig={appConfig}>
  <slot name="head" slot="head" />
  <slot name="body-start" slot="body-start" />
  <Container>
    <div class="overview-content">
      <div class="header"><slot name="header" /></div>
      <div class="search"><slot name="search" /></div>
      <div class="filters">
        <slot name="filters" />
      </div>
      <div class="results">
        <slot />
      </div>
      <div class="pagination">
        <slot name="pagination" />
      </div>
    </div>
  </Container>
  <slot name="body-end" slot="body-end" />
</Base>

<style>
  @media (--lg-and-above-viewport) {
    /* 12 columns */
    .overview-content {
      --first-column: 3fr;
      --second-column: 9fr;
    }
  }

  @media (--md-viewport) {
    /* 9 columns */
    .overview-content {
      --first-column: 3fr;
      --second-column: 6fr;
    }
  }

  @media (--sm-viewport) {
    /* 9 columns */
    .overview-content {
      --first-column: 4fr;
      --second-column: 5fr;
    }
  }

  @media (--xs-viewport) {
    /* 6 columns */
    .overview-content {
      --first-column: 2fr;
      --second-column: 4fr;
    }
  }

  .overview-content {
    display: grid;
    grid-template-columns: 
      [search-start filters-start] var(--first-column, 3fr) [filters-end search-end
      header-start results-start pagination-start] var(--second-column, 9fr) [header-end results-end pagination-end];
    grid-template-rows: 
      [header-start] auto [header-end 
      search-start results-start] minmax(0, auto) [search-end 
      filters-start] auto [filters-end results-end
      pagination-start] auto [pagination-end];
    gap: 1rem;
  }

  @media (--sm-and-below-viewport) {
    .overview-content {
      grid-template-columns: 
        [search-start filters-start header-start] var(--first-column, 3fr) [filters-end search-end
        results-start pagination-start] var(--second-column, 9fr) [header-end results-end pagination-end];
    }
  }

  @media (--xxs-and-below-viewport) {
    /* 1 column */
    .overview-content {
    grid-template-columns: 
      [search-start filters-start header-start results-start pagination-start] 1fr [filters-end search-end header-end results-end pagination-end];
    grid-template-rows: 
      [header-start] auto [header-end 
      search-start] auto [search-end 
      results-start] minmax(0, auto) [results-end 
      filters-start] auto [filters-end 
      pagination-start] auto [pagination-end];
    }
  }

  .header {
    grid-area: header;

    &:empty {
      display: none;
    }
  }

  .search {
    grid-area: search;

    &:empty {
      display: none;
      /* margin-bottom: -1rem; */
    }
  }

  .filters {
    grid-area: filters;
  }

  .results {
    grid-area: results;
  }

  .pagination {
    grid-area: pagination;
  }

</style>