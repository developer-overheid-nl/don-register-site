---
import '../styles/reset.css';
import "../../../../proprietary/fonts/ro/index.css";
// import tokens from '@rijkshuisstijl-community/design-tokens/dist/uitvoerend-groen/root.css?url';
// import css from '@rijkshuisstijl-community/components-css/dist/index.css?url';
import '@rijkshuisstijl-community/design-tokens/dist/uitvoerend-groen/root.css';
import '@rijkshuisstijl-community/components-css/dist/index.css';
import '../styles/override.css';
import '../styles/helpers.css';
import { Container, IconsSprite, Header, TopNavigation, Footer } from '@developer-overheid-nl/don-register-components';
import i18next from 'i18next';
import resources from '@developer-overheid-nl/don-register-locales/nl' with { type: "json" };

const { appConfig: {title: titleSite, mainSite, topNavigation}, titlePage } = Astro.props;
const { routePattern } = Astro;

i18next.init({
  // Right now we are using the locales directly, but in the future we can use the i18next-fs-backend to load them from files
  // We also have just one language. Refactor this when we have more languages.
  lng: 'nl',
  fallbackLng: 'nl',
  resources: {
    nl: {
      translation: resources
    }
  },
});
---

<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={ i18next.t('layouts.meta-description') } />
    <!-- <link href={tokens} rel="preload" as="style">
    <link href={css} rel="preload" as="style">
    <link rel="stylesheet" href={tokens}>
    <link rel="stylesheet" href={css}> -->
    <title>{titlePage} | {titleSite}</title>
    <slot name="head" />
  </head>
  <body class="utrecht-document don-document">
    <div class="don-document-start">
      <slot name="body-start" />
      <IconsSprite />
    </div>
    <div class="don-document-header">
    <Container>
      <Header titleSite={titleSite} titlePage={titlePage} mainSite={mainSite} urlCurrent={routePattern} />
    </Container>
    <TopNavigation items={topNavigation.items} endItems={topNavigation.endItems} />
    </div>
    <div class="don-document-main">
      <slot />
    </div>
    <div class="don-document-footer">
      <Footer />
    </div>
    <div class="don-document-end">
      <slot name="body-end" />
    </div>
  </body>
</html>

<style>
  .don-document {
    height: 100dvh;
    display: grid;
    grid-template-rows: [start-start] 0 [start-end 
                        header-start] auto [header-end 
                        main-start] 1fr [main-end 
                        footer-start] auto [footer-end 
                        end-start] 0 [end-end];
    grid-template-columns: [start-start header-start main-start footer-start end-start] auto [end-end footer-end main-end header-end start-end];
    grid-auto-rows: 0;
  }

  .don-document-start {
    grid-area: start;
  }

  .don-document-header {
    grid-area: header;
  }

  .don-document-main {
    grid-area: main;
  }

  .don-document-footer {
    grid-area: footer;
  }

  .don-document-end {
    grid-area: end;
  }
</style>